---
title: Swift 入门（12）：协议
date: 2025-09-14
categories: Swift
tags: [Swift, iOS, 教程]
---

# Swift 入门（12）：协议

> 协议（`protocol`）就像“契约”，规定了 **必须具备的属性和方法**。  
> 类、结构体、枚举都可以遵循协议。

---

## 1. 定义协议

```swift
protocol Drawable {
    func draw()
}
````

---

## 2. 遵循协议

```swift
struct Circle: Drawable {
    func draw() {
        print("画一个圆")
    }
}

let c = Circle()
c.draw()  // 画一个圆
```

---

## 3. 属性要求

协议可以要求属性，但只规定 **读/写权限**，不实现。

```swift
protocol Named {
    var name: String { get set }
    var description: String { get }
}

struct Person: Named {
    var name: String
    var description: String {
        "我的名字是 \(name)"
    }
}

let p = Person(name: "Alice")
print(p.description) // 我的名字是 Alice
```

---

## 4. 多协议

一个类型可以同时遵循多个协议。

```swift
protocol Flyable { func fly() }
protocol Swimmable { func swim() }

struct Duck: Flyable, Swimmable {
    func fly() { print("鸭子会飞") }
    func swim() { print("鸭子会游泳") }
}
```

---

## 5. 协议作为类型

协议不仅是规范，也能作为类型使用。

```swift
func test(d: Drawable) {
    d.draw()
}

test(d: Circle()) // 画一个圆
```

---

## 6. 协议继承

协议可以继承其它协议。

```swift
protocol Animal {
    func eat()
}

protocol Pet: Animal {
    func play()
}

struct Dog: Pet {
    func eat() { print("狗在吃") }
    func play() { print("狗在玩") }
}
```

---

## 总结

* `protocol` 用来定义 **方法和属性的规范**。
* 类/结构体/枚举都可以遵循协议。
* 协议也可以 **继承** 和 **组合**。
* 协议能作为类型使用，是 Swift 面向协议编程的基础。

