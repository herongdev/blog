å¥½çš„ âœ… æˆ‘æ¥å¸®ä½ å†™ **è¿›é˜¶ç³»åˆ—ç¬¬ 3 ç¯‡**ï¼Œä¿æŒ Hexo åšå®¢é£æ ¼ï¼Œä¸»é¢˜æ˜¯ **ç©ºå®‰å…¨è¿›é˜¶**ã€‚

---

````markdown
---
title: Kotlin è¿›é˜¶ï¼ˆ3ï¼‰ï¼šç©ºå®‰å…¨è¿›é˜¶
date: 2025-09-12
categories: [Kotlin è¿›é˜¶å­¦ä¹ ]
tags: [Kotlin, ç©ºå®‰å…¨, NullPointerException, Elvis, å®‰å…¨è°ƒç”¨]
---

# Kotlin è¿›é˜¶ï¼ˆ3ï¼‰ï¼šç©ºå®‰å…¨è¿›é˜¶

åœ¨ Java é‡Œï¼Œ`NullPointerException`ï¼ˆç®€ç§° NPEï¼‰å‡ ä¹æ˜¯æœ€å¸¸è§çš„è¿è¡Œæ—¶é”™è¯¯ã€‚  
è€Œ Kotlin çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€å°±æ˜¯ **å½»åº•å‡å°‘ç©ºæŒ‡é’ˆé”™è¯¯**ã€‚  
ä»Šå¤©æˆ‘ä»¬æ·±å…¥å­¦ä¹  Kotlin çš„ **ç©ºå®‰å…¨è¯­æ³•** å’Œ **æœ€ä½³å®è·µ**ã€‚

---

## 1. å¯ç©ºç±»å‹ä¸éç©ºç±»å‹

Kotlin æŠŠç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š

- **éç©ºç±»å‹**ï¼šé»˜è®¤ä¸èƒ½ä¸º `null`
- **å¯ç©ºç±»å‹**ï¼šåœ¨ç±»å‹ååŠ  `?` è¡¨ç¤º

```kotlin
val a: String = "Hello"
// a = null âŒ ç¼–è¯‘æŠ¥é”™

val b: String? = "Hi"
val c: String? = null
```
````

---

## 2. å®‰å…¨è°ƒç”¨ï¼ˆ?.ï¼‰

å¦‚æœå¯¹è±¡å¯èƒ½ä¸º `null`ï¼Œç”¨ `?.` æ¥å®‰å…¨è°ƒç”¨ã€‚

```kotlin
val name: String? = null
println(name?.length) // nullï¼Œè€Œä¸æ˜¯æŠ›å¼‚å¸¸
```

---

## 3. Elvis æ“ä½œç¬¦ï¼ˆ?:ï¼‰

å¦‚æœå·¦è¾¹æ˜¯ `null`ï¼Œå°±ç”¨å³è¾¹çš„å€¼ã€‚

```kotlin
val name: String? = null
val length = name?.length ?: 0
println(length) // 0
```

---

## 4. éç©ºæ–­è¨€ï¼ˆ!!ï¼‰

æŠŠå¯ç©ºç±»å‹å¼ºåˆ¶è½¬ä¸ºéç©ºï¼Œå¦‚æœæ˜¯ `null` å°±æŠ› NPEã€‚
âš ï¸ **æ…ç”¨ï¼** ä¸€èˆ¬åªåœ¨â€œç»å¯¹ä¿è¯éç©ºâ€çš„åœ°æ–¹ä½¿ç”¨ã€‚

```kotlin
val s: String? = "Kotlin"
println(s!!.length) // 6

val t: String? = null
println(t!!.length) // âŒ NPE
```

---

## 5. `let` ä¸ç©ºå®‰å…¨é“¾å¼è°ƒç”¨

`let` å¸¸å’Œ `?.` ä¸€èµ·ç”¨ï¼Œåªæœ‰éç©ºæ—¶æ‰ä¼šæ‰§è¡Œã€‚

```kotlin
val name: String? = "Kotlin"
name?.let {
    println("é•¿åº¦æ˜¯ ${it.length}") // 6
}
```

è¿˜èƒ½å†™æˆé“¾å¼è°ƒç”¨ï¼š

```kotlin
val result = name?.takeIf { it.length > 3 }?.uppercase()
println(result) // KOTLIN
```

---

## 6. `lateinit` ä¸ `by lazy`

å¦‚æœä¸€ä¸ªå˜é‡åœ¨ç¨ååˆå§‹åŒ–ï¼Œå¯ä»¥ç”¨ï¼š

- **`lateinit var`**ï¼šå¿…é¡»æ˜¯ `var`ï¼Œå¸¸ç”¨äºä¾èµ–æ³¨å…¥ã€Android View
- **`by lazy`**ï¼šå¿…é¡»æ˜¯ `val`ï¼Œç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šåˆå§‹åŒ–

```kotlin
lateinit var username: String

val config: String by lazy {
    println("åˆå§‹åŒ–ä¸­â€¦")
    "é…ç½®åŠ è½½å®Œæˆ"
}
```

---

## 7. å¹³å°ç±»å‹ä¸ Java äº’æ“ä½œ

ä» Java ä»£ç è°ƒç”¨æ¥çš„å¯¹è±¡å¯èƒ½æ˜¯ `null` ä¹Ÿå¯èƒ½ä¸æ˜¯ï¼ŒKotlin æŠŠå®ƒç§°ä¸º **å¹³å°ç±»å‹**ï¼ˆä¸å¸¦ `?` ä¹Ÿä¸å¸¦ `!!`ï¼‰ã€‚
æ‰€ä»¥åœ¨å’Œ Java äº’æ“ä½œæ—¶ï¼Œè¦ç‰¹åˆ«å°å¿ƒç©ºæŒ‡é’ˆé—®é¢˜ã€‚

```java
// Java
public String getName() { return null; }
```

```kotlin
val name = javaObj.name // å¹³å°ç±»å‹ï¼Œä¸å®‰å…¨
println(name.length)    // å¯èƒ½ç›´æ¥ NPE
```

---

## 8. å°ç»“

- Kotlin é€šè¿‡ **å¯ç©ºç±»å‹** å’Œ **ç©ºå®‰å…¨æ“ä½œç¬¦**ï¼Œæœ€å¤§é™åº¦é¿å… NPE
- å¸¸ç”¨è¯­æ³•ï¼š`?.`ã€`?:`ã€`!!`ã€`let`
- åˆå§‹åŒ–åœºæ™¯ï¼š`lateinit` å’Œ `by lazy`
- æ³¨æ„ Java å¹³å°ç±»å‹çš„æ½œåœ¨é£é™©

---

ä¸‹ä¸€ç¯‡æˆ‘ä»¬å­¦ä¹  ğŸ‘‰ **ã€ŠKotlin è¿›é˜¶ï¼ˆ4ï¼‰ï¼šé›†åˆæ“ä½œè¿›é˜¶ï¼ˆmap/filter/flatMap/reduceï¼‰ã€‹**ï¼Œå†™å‡ºæ›´ç®€æ´ä¼˜é›…çš„æ•°æ®å¤„ç†ä»£ç ã€‚

```

---

è¦ä¸è¦æˆ‘æ¥ç€å¸®ä½ å†™ **ã€ŠKotlin è¿›é˜¶ï¼ˆ4ï¼‰ï¼šé›†åˆæ“ä½œè¿›é˜¶ã€‹**ï¼Ÿ
```
