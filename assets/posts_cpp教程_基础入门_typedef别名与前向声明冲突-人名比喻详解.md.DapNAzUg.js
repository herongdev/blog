import{_ as a,c as i,o as n,ag as t}from"./chunks/framework.oqSrIbQK.js";const o=JSON.parse('{"title":"typedef 别名与前向声明冲突：人名比喻详解","description":"用大白话解释：为什么不能用 struct 前向声明 typedef 的别名？包含问题比喻、错误原因、两种修复方案与实战示例。","frontmatter":{"title":"typedef 别名与前向声明冲突：人名比喻详解","date":"2025-01-27T00:00:00.000Z","tags":["C++","typedef","前向声明","头文件"],"description":"用大白话解释：为什么不能用 struct 前向声明 typedef 的别名？包含问题比喻、错误原因、两种修复方案与实战示例。"},"headers":[],"relativePath":"posts/cpp教程/基础入门/typedef别名与前向声明冲突-人名比喻详解.md","filePath":"posts/cpp教程/基础入门/typedef别名与前向声明冲突-人名比喻详解.md","lastUpdated":1764331727000}'),e={name:"posts/cpp教程/基础入门/typedef别名与前向声明冲突-人名比喻详解.md"};function l(p,s,h,k,d,r){return n(),i("div",null,[...s[0]||(s[0]=[t(`<h2 id="问题比喻-人名冲突" tabindex="-1">问题比喻：人名冲突 <a class="header-anchor" href="#问题比喻-人名冲突" aria-label="Permalink to &quot;问题比喻：人名冲突&quot;">​</a></h2><p>想象有两个人都叫&quot;张三&quot;：</p><h3 id="sdk-官方说" tabindex="-1">SDK 官方说 <a class="header-anchor" href="#sdk-官方说" aria-label="Permalink to &quot;SDK 官方说&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 官方声明：&quot;张三&quot;是&quot;张老三&quot;的别名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 张老三 张三;</span></span></code></pre></div><p>意思是：<strong>张三 = 张老三的小名</strong></p><h3 id="你的代码说" tabindex="-1">你的代码说 <a class="header-anchor" href="#你的代码说" aria-label="Permalink to &quot;你的代码说&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 你的声明：我认识一个叫&quot;张三&quot;的人</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 张三;</span></span></code></pre></div><p>意思是：<strong>张三 = 这个人的真名</strong></p><h3 id="编译器懵了" tabindex="-1">编译器懵了 <a class="header-anchor" href="#编译器懵了" aria-label="Permalink to &quot;编译器懵了&quot;">​</a></h3><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>❌ 错误！到底&quot;张三&quot;是别名还是真名？</span></span>
<span class="line"><span>一个人不能既是别名又是真名！</span></span></code></pre></div><h2 id="具体到代码" tabindex="-1">具体到代码 <a class="header-anchor" href="#具体到代码" aria-label="Permalink to &quot;具体到代码&quot;">​</a></h2><h3 id="sdk-头文件里是" tabindex="-1">SDK 头文件里是 <a class="header-anchor" href="#sdk-头文件里是" aria-label="Permalink to &quot;SDK 头文件里是&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 官方定义：OHNativeWindow 是 struct NativeWindow 的别名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NativeWindow OHNativeWindow;</span></span></code></pre></div><h3 id="你的头文件里是" tabindex="-1">你的头文件里是 <a class="header-anchor" href="#你的头文件里是" aria-label="Permalink to &quot;你的头文件里是&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 你的前向声明：把别名当成了真正的结构体名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OHNativeWindow;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ❌ 错误！</span></span></code></pre></div><h2 id="什么是-前向声明" tabindex="-1">什么是&quot;前向声明&quot;？ <a class="header-anchor" href="#什么是-前向声明" aria-label="Permalink to &quot;什么是&quot;前向声明&quot;？&quot;">​</a></h2><p>前向声明就是&quot;我先说有这么个人，回头再介绍他长什么样&quot;。</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 前向声明：先告诉编译器有这个人</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 张老三;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 后面再详细描述这个人</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 张老三 {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 年龄;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    char</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 姓名[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h2 id="两种修复方案" tabindex="-1">两种修复方案 <a class="header-anchor" href="#两种修复方案" aria-label="Permalink to &quot;两种修复方案&quot;">​</a></h2><h3 id="方案-1-用真名声明" tabindex="-1">方案 1：用真名声明 <a class="header-anchor" href="#方案-1-用真名声明" aria-label="Permalink to &quot;方案 1：用真名声明&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 改用真正的结构体名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NativeWindow;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ✅ 正确！</span></span></code></pre></div><h3 id="方案-2-直接包含头文件" tabindex="-1">方案 2：直接包含头文件 <a class="header-anchor" href="#方案-2-直接包含头文件" aria-label="Permalink to &quot;方案 2：直接包含头文件&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 直接包含官方头文件，别自己声明了</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;native_window/native_window.h&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ✅ 正确！</span></span></code></pre></div><h2 id="为什么会出现这个问题" tabindex="-1">为什么会出现这个问题？ <a class="header-anchor" href="#为什么会出现这个问题" aria-label="Permalink to &quot;为什么会出现这个问题？&quot;">​</a></h2><p>因为你想在头文件里写：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GLRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    OHNativeWindow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window_;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 需要知道 OHNativeWindow 是什么</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>但又不愿意包含整个庞大的头文件，所以想用前向声明。</p><h2 id="正确的做法" tabindex="-1">正确的做法 <a class="header-anchor" href="#正确的做法" aria-label="Permalink to &quot;正确的做法&quot;">​</a></h2><p>在你的 <code>gl_renderer.h</code> 文件中：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 方法 1：使用真正的结构体名进行前向声明</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NativeWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 这才是真名！</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GLRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    NativeWindow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window_;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 现在用真名（如果接口允许）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>或者：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 方法 2：直接包含头文件（更简单）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;native_window/native_window.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GLRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    OHNativeWindow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window_;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 直接用别名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h2 id="更深层的理解" tabindex="-1">更深层的理解 <a class="header-anchor" href="#更深层的理解" aria-label="Permalink to &quot;更深层的理解&quot;">​</a></h2><h3 id="typedef-的本质" tabindex="-1">typedef 的本质 <a class="header-anchor" href="#typedef-的本质" aria-label="Permalink to &quot;typedef 的本质&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// typedef 创建的是类型别名，不是新类型</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NativeWindow OHNativeWindow;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 等价于说：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;OHNativeWindow&quot; 这个名字现在指向 &quot;struct NativeWindow&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 但没有创建一个叫 &quot;struct OHNativeWindow&quot; 的新类型</span></span></code></pre></div><h3 id="为什么不能前向声明别名" tabindex="-1">为什么不能前向声明别名？ <a class="header-anchor" href="#为什么不能前向声明别名" aria-label="Permalink to &quot;为什么不能前向声明别名？&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ❌ 错误：编译器认为你在声明一个新类型</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OHNativeWindow;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 编译器想：struct OHNativeWindow 是什么？</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 但实际上 OHNativeWindow 只是别名</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 编译器无法从别名追溯到原始类型</span></span></code></pre></div><h2 id="实际开发中的最佳实践" tabindex="-1">实际开发中的最佳实践 <a class="header-anchor" href="#实际开发中的最佳实践" aria-label="Permalink to &quot;实际开发中的最佳实践&quot;">​</a></h2><h3 id="场景-1-只需要指针-引用" tabindex="-1">场景 1：只需要指针/引用 <a class="header-anchor" href="#场景-1-只需要指针-引用" aria-label="Permalink to &quot;场景 1：只需要指针/引用&quot;">​</a></h3><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ 推荐：使用原始类型名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NativeWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 前向声明</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    NativeWindow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ptr_;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 指针可以用于前向声明</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="场景-2-需要完整类型信息" tabindex="-1">场景 2：需要完整类型信息 <a class="header-anchor" href="#场景-2-需要完整类型信息" aria-label="Permalink to &quot;场景 2：需要完整类型信息&quot;">​</a></h3><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ 推荐：包含完整头文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;native_window/native_window.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    OHNativeWindow window_;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 需要完整定义</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="场景-3-混合使用" tabindex="-1">场景 3：混合使用 <a class="header-anchor" href="#场景-3-混合使用" aria-label="Permalink to &quot;场景 3：混合使用&quot;">​</a></h3><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在头文件中：前向声明（减少依赖）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NativeWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在源文件中：包含完整定义</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;native_window/native_window.h&gt;</span></span></code></pre></div><h2 id="常见错误示例" tabindex="-1">常见错误示例 <a class="header-anchor" href="#常见错误示例" aria-label="Permalink to &quot;常见错误示例&quot;">​</a></h2><h3 id="错误示例-1" tabindex="-1">错误示例 1 <a class="header-anchor" href="#错误示例-1" aria-label="Permalink to &quot;错误示例 1&quot;">​</a></h3><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ❌ 错误：前向声明别名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OHNativeWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 错误！</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OHNativeWindow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="错误示例-2" tabindex="-1">错误示例 2 <a class="header-anchor" href="#错误示例-2" aria-label="Permalink to &quot;错误示例 2&quot;">​</a></h3><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ❌ 错误：前向声明别名，然后尝试使用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OHNativeWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    OHNativeWindow w;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 错误：编译器不知道 OHNativeWindow 的完整定义</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="正确示例" tabindex="-1">正确示例 <a class="header-anchor" href="#正确示例" aria-label="Permalink to &quot;正确示例&quot;">​</a></h3><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ 正确：前向声明原始类型</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NativeWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NativeWindow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 指针可以</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> func2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ❌ 如果这里需要完整定义，必须包含头文件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // NativeWindow w;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 需要完整定义</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p><strong>问题根源：</strong> 你把别人的&quot;小名&quot;当成了&quot;真名&quot;来介绍。</p><p><strong>解决方案：</strong> 要么用&quot;真名&quot;介绍，要么直接请本人出场（包含头文件）。</p><p><strong>记忆要点：</strong></p><table tabindex="0"><thead><tr><th>情况</th><th>正确做法</th><th>错误做法</th></tr></thead><tbody><tr><td>typedef 别名</td><td>用原始类型名前向声明</td><td><code>struct 别名;</code></td></tr><tr><td>只需要指针</td><td>前向声明原始类型</td><td>包含完整头文件（不必要）</td></tr><tr><td>需要完整定义</td><td>包含头文件</td><td>只用前向声明</td></tr></tbody></table><p><strong>洲煌总结：这就像你向朋友介绍&quot;小王&quot;，结果发现&quot;小王&quot;只是人家的外号，真名叫&quot;王大锤&quot;。你要么直接说&quot;我认识王大锤&quot;，要么把真人请过来让大家认识！</strong></p>`,57)])])}const g=a(e,[["render",l]]);export{o as __pageData,g as default};
