import{_ as i,c as a,o as l,ag as n}from"./chunks/framework.oqSrIbQK.js";const g=JSON.parse('{"title":"OpenGL ES 3 与 EGL 的区别：工地比喻 + 实战清单","description":"用工地比喻快速理解：OpenGL ES 3 负责“怎么画”，EGL 负责“在哪画”。含初始化与绘制清单。","frontmatter":{"title":"OpenGL ES 3 与 EGL 的区别：工地比喻 + 实战清单","date":"2025-01-27T00:00:00.000Z","tags":["OpenGL ES","EGL","图形","HarmonyOS"],"description":"用工地比喻快速理解：OpenGL ES 3 负责“怎么画”，EGL 负责“在哪画”。含初始化与绘制清单。"},"headers":[],"relativePath":"posts/cpp教程/基础入门/OpenGL-ES-3-与-EGL-区别-工地比喻与实战清单.md","filePath":"posts/cpp教程/基础入门/OpenGL-ES-3-与-EGL-区别-工地比喻与实战清单.md","lastUpdated":1764331727000}'),p={name:"posts/cpp教程/基础入门/OpenGL-ES-3-与-EGL-区别-工地比喻与实战清单.md"};function h(t,s,k,e,E,r){return l(),a("div",null,[...s[0]||(s[0]=[n(`<h2 id="比喻-建筑工地" tabindex="-1">比喻：建筑工地 <a class="header-anchor" href="#比喻-建筑工地" aria-label="Permalink to &quot;比喻：建筑工地&quot;">​</a></h2><ul><li>OpenGL ES 3 = 建筑工人和施工技术（具体怎么盖房子）</li><li>EGL = 工地办公室和施工许可（在哪儿盖、如何展示）</li></ul><h2 id="opengl-es-3-——-建筑工人团队" tabindex="-1">OpenGL ES 3 —— “建筑工人团队” <a class="header-anchor" href="#opengl-es-3-——-建筑工人团队" aria-label="Permalink to &quot;OpenGL ES 3 —— “建筑工人团队”&quot;">​</a></h2><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// OpenGL ES 3：真正干活的人</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glClearColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.08</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 准备“底色”</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glDrawArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GL_TRIANGLES, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           // 砌“砖”（画三角形）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glUniform4fv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uColor_, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, c.color);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           // 上“油漆”（设置颜色）</span></span></code></pre></div><p>OpenGL ES 3 负责：</p><ul><li>绘制几何（点/线/三角形）</li><li>颜色与透明度</li><li>光照计算</li><li>3D 变换（平移/旋转/缩放）</li><li>纹理贴图</li></ul><p>特点：</p><ul><li>只管画画，不管在哪显示；</li><li>专业工具齐全；</li><li>ES 3 相比 ES 2 功能更强、效率更高。</li></ul><h2 id="egl-——-工地管理办公室" tabindex="-1">EGL —— “工地管理办公室” <a class="header-anchor" href="#egl-——-工地管理办公室" aria-label="Permalink to &quot;EGL —— “工地管理办公室”&quot;">​</a></h2><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// EGL：准备场地、许可与展示</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">display_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eglGetDisplay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(EGL_DEFAULT_DISPLAY);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 找到“工地”</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eglInitialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(display_, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nullptr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nullptr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // 初始化“场地”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">surface_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eglCreateWindowSurface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(display_, cfg, window_, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nullptr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 准备“画布”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eglCreateContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(display_, cfg, EGL_NO_CONTEXT, ctxAttrs);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 许可证</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eglSwapBuffers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(display_, surface_);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              // 展示成果</span></span></code></pre></div><p>EGL 负责：</p><ul><li>场地准备：连接 OS 与显示设备（EGLDisplay）；</li><li>手续办理：创建绘图上下文（EGLContext）；</li><li>舞台搭建：创建绘制表面（EGLSurface）；</li><li>成果展示：交换缓冲、把图像显示到屏幕；</li><li>工具协调：管理 OpenGL 与系统通信。</li></ul><p>特点：</p><ul><li>不画内容，只提供“能画并能显示”的环境；</li><li>是 App 和系统的桥梁。</li></ul><h2 id="实际工作流程对比" tabindex="-1">实际工作流程对比 <a class="header-anchor" href="#实际工作流程对比" aria-label="Permalink to &quot;实际工作流程对比&quot;">​</a></h2><p>EGL（准备工作）：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">display_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eglGetDisplay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(EGL_DEFAULT_DISPLAY);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eglInitialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(display_, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nullptr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nullptr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eglCreateContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(display_, cfg, EGL_NO_CONTEXT, ctxAttrs);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">surface_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eglCreateWindowSurface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(display_, cfg, window_, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nullptr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eglMakeCurrent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(display_, surface_, surface_, context_);</span></span></code></pre></div><p>OpenGL ES 3（实际施工）：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glClear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GL_COLOR_BUFFER_BIT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GL_DEPTH_BUFFER_BIT);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glUseProgram</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(program_);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glBindVertexArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vao_);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glDrawArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GL_TRIANGLES, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glUniform4fv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uColor_, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, c.color);</span></span></code></pre></div><p>两者关系：</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>EGL 准备好 → OpenGL ES 3 开始画 → EGL 负责展示</span></span></code></pre></div><h2 id="在代码中的分工-示例" tabindex="-1">在代码中的分工（示例） <a class="header-anchor" href="#在代码中的分工-示例" aria-label="Permalink to &quot;在代码中的分工（示例）&quot;">​</a></h2><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RenderFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // EGL：初始化阶段已完成 display_/surface_/context_</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // OpenGL ES 3：绘制</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  glClearColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.08</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  glClear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GL_COLOR_BUFFER_BIT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GL_DEPTH_BUFFER_BIT);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  glUseProgram</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(program_);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  glBindVertexArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vao_);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 每个物体 */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    glUniformMatrix4fv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uMVP_, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, GL_FALSE, MVP);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    glUniform4fv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uColor_, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, c.color);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    glDrawArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GL_TRIANGLES, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // EGL：展示</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  eglSwapBuffers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(display_, surface_);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="版本对比-opengl-es-3-vs-es-2" tabindex="-1">版本对比：OpenGL ES 3 vs ES 2 <a class="header-anchor" href="#版本对比-opengl-es-3-vs-es-2" aria-label="Permalink to &quot;版本对比：OpenGL ES 3 vs ES 2&quot;">​</a></h2><div class="language-glsl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">glsl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ES 2（较旧）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#version </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">attribute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> vec3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aPos;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ES 3（较新）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#version </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> es</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> vec3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aPos;</span></span></code></pre></div><p>ES 3 典型提升：</p><ul><li>更多纹理格式；</li><li>更强缓冲/对象管理；</li><li>GLSL 语法更现代、更灵活；</li><li>更好的性能与可移植性。</li></ul><h2 id="速览表" tabindex="-1">速览表 <a class="header-anchor" href="#速览表" aria-label="Permalink to &quot;速览表&quot;">​</a></h2><table tabindex="0"><thead><tr><th>角色</th><th>OpenGL ES 3</th><th>EGL</th></tr></thead><tbody><tr><td>职责</td><td>画什么（内容）</td><td>在哪画（环境）</td></tr><tr><td>比喻</td><td>建筑工人</td><td>工地办公室</td></tr><tr><td>工作</td><td>绘图、上色、光照</td><td>创建环境、显示结果</td></tr><tr><td>依赖</td><td>需要 EGL 提供环境</td><td>不画内容、只管环境</td></tr></tbody></table><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>EGL 是“舞台管理员”，OpenGL ES 3 是“演员”。</p><ul><li>没有 EGL，演员无处表演；</li><li>没有 OpenGL，舞台上无人演；</li><li>两者配合，才能上演精彩的 3D 图形大戏。</li></ul>`,32)])])}const y=i(p,[["render",h]]);export{g as __pageData,y as default};
