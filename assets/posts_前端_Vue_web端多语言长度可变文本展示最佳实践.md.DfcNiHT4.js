import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.oqSrIbQK.js";const g=JSON.parse('{"title":"v-smart-name æŒ‡ä»¤ï¼šè¿™æ˜¯æœ€ä½³å®è·µå—ï¼Ÿç”¨åˆ°å“ªäº›å…³é”®æŠ€æœ¯ï¼Ÿï¼ˆæ€»ç»“ä¸ç»´æŠ¤æ‰‹å†Œï¼‰","description":"","frontmatter":{"title":"v-smart-name æŒ‡ä»¤ï¼šè¿™æ˜¯æœ€ä½³å®è·µå—ï¼Ÿç”¨åˆ°å“ªäº›å…³é”®æŠ€æœ¯ï¼Ÿï¼ˆæ€»ç»“ä¸ç»´æŠ¤æ‰‹å†Œï¼‰","date":"2025-09-19T00:00:00.000Z","tags":["i18n","Emoji/å­—ç´ ç°‡","UI/UX"]},"headers":[],"relativePath":"posts/å‰ç«¯/Vue/webç«¯å¤šè¯­è¨€é•¿åº¦å¯å˜æ–‡æœ¬å±•ç¤ºæœ€ä½³å®è·µ.md","filePath":"posts/å‰ç«¯/Vue/webç«¯å¤šè¯­è¨€é•¿åº¦å¯å˜æ–‡æœ¬å±•ç¤ºæœ€ä½³å®è·µ.md","lastUpdated":1758475234000}'),h={name:"posts/å‰ç«¯/Vue/webç«¯å¤šè¯­è¨€é•¿åº¦å¯å˜æ–‡æœ¬å±•ç¤ºæœ€ä½³å®è·µ.md"};function t(k,s,p,e,E,r){return n(),a("div",null,[...s[0]||(s[0]=[l(`<p><strong>Web å‰ç«¯åœ¨è·¨è¯­è¨€å¯å˜é•¿åº¦æ–‡æœ¬ç¨³å®šå±•ç¤ºä¸Šçš„æœ€ä½³å®è·µç»„åˆ</strong></p><ul><li><strong>ä¼˜å…ˆ CSSï¼Œå¿…è¦æ—¶ JS</strong>ï¼šå•/å¤šè¡Œç”¨ <code>text-overflow</code> ä¸ <code>-webkit-line-clamp</code>ï¼Œä»…åœ¨éœ€è¦â€œä¸­é—´çœç•¥â€æˆ–â€œå®½åº¦ç²¾æ§â€æ—¶ä½¿ç”¨ JSã€‚</li><li><strong>å­—ç´ ç°‡å®‰å…¨</strong>ï¼š<code>Intl.Segmenter({ granularity: &#39;grapheme&#39; })</code>ï¼Œé¿å…â€œåˆ‡åŠä¸ª emoji/åˆå­—â€ã€‚</li><li><strong>åƒç´ çº§è‡ªé€‚é…</strong>ï¼š<code>canvas.measureText</code> åŸºäº<strong>çœŸå®å­—ä½“</strong>æµ‹å®½ï¼ŒæŒ‰å®¹å™¨å®½åº¦è®¡ç®—å‰åä¿ç•™é‡ã€‚</li><li><strong>ç¨³å®šæ€§</strong>ï¼š<code>ResizeObserver + requestAnimationFrame</code> åˆå¹¶é‡æ’ï¼›<code>MutationObserver</code> åªè®¤â€œå¤–éƒ¨çœŸå®å˜æ›´â€ï¼›å¾®ä»»åŠ¡çº§<strong>æŠ‘åˆ¶è‡ªè§¦å‘</strong>æ¶ˆé™¤æ­»å¾ªç¯ã€‚</li><li><strong>å¯è®¿é—®æ€§</strong>ï¼š<code>aria-label</code>/<code>title</code> å§‹ç»ˆå†™<strong>åŸæ–‡</strong>ï¼Œå±•ç¤ºå±‚å¯çœç•¥ä½† tooltip ä¸è¢«æ±¡æŸ“ã€‚</li><li><strong>å¸ƒå±€çº¦æŸ</strong>ï¼š<code>min-w-0 / flex-1 / shrink-0 / max-width: 100%</code> ç­‰ä¿è¯â€œå¯æ”¶ç¼©ã€å¯çœç•¥â€ã€‚</li></ul><blockquote><p>è¿™ä¸æ˜¯â€œä»£ç ç‚«æŠ€â€ï¼Œè€Œæ˜¯æŠŠå„å±‚é¢å‘ä½ï¼ˆi18n/å¸ƒå±€/æ€§èƒ½/å¯è¾¾æ€§/ç¨³å®šï¼‰éƒ½å¤„ç†åˆ°ä½åçš„<strong>å·¥ç¨‹åŒ–ç»„åˆæ‹³</strong>ã€‚</p></blockquote><hr><h1 id="å…³é”®æŠ€æœ¯æ¸…å•-ä½ å›¢é˜Ÿä»¥åå¿«é€Ÿå¤ç”¨çš„çŸ¥è¯†ç‚¹" tabindex="-1">å…³é”®æŠ€æœ¯æ¸…å•ï¼ˆä½ å›¢é˜Ÿä»¥åå¿«é€Ÿå¤ç”¨çš„çŸ¥è¯†ç‚¹ï¼‰ <a class="header-anchor" href="#å…³é”®æŠ€æœ¯æ¸…å•-ä½ å›¢é˜Ÿä»¥åå¿«é€Ÿå¤ç”¨çš„çŸ¥è¯†ç‚¹" aria-label="Permalink to &quot;å…³é”®æŠ€æœ¯æ¸…å•ï¼ˆä½ å›¢é˜Ÿä»¥åå¿«é€Ÿå¤ç”¨çš„çŸ¥è¯†ç‚¹ï¼‰&quot;">â€‹</a></h1><h2 id="_1-æ˜¾ç¤ºç­–ç•¥åˆ†å±‚" tabindex="-1">1ï¼‰æ˜¾ç¤ºç­–ç•¥åˆ†å±‚ <a class="header-anchor" href="#_1-æ˜¾ç¤ºç­–ç•¥åˆ†å±‚" aria-label="Permalink to &quot;1ï¼‰æ˜¾ç¤ºç­–ç•¥åˆ†å±‚&quot;">â€‹</a></h2><ul><li><p><strong>CSS å•/å¤šè¡Œçœç•¥</strong>ï¼š</p><ul><li>å•è¡Œï¼š<code>white-space: nowrap; overflow: hidden; text-overflow: ellipsis;</code></li><li>å¤šè¡Œï¼š<code>display: -webkit-box; -webkit-line-clamp: N; -webkit-box-orient: vertical; overflow: hidden;</code></li><li>æ–­è¡Œï¼š<code>white-space: normal; word-break: break-word; overflow-wrap: anywhere; line-break: auto;</code></li></ul></li><li><p><strong>JS ä¸­é—´çœç•¥ï¼ˆä»…å¿…è¦æ—¶ï¼‰</strong>ï¼šä¿ç•™é¦–å°¾ä¿¡æ¯ï¼Œé€‚é…å„ç§å®½åº¦åœºæ™¯ã€‚</p></li></ul><h2 id="_2-å­—ç´ ç°‡-grapheme-å®‰å…¨" tabindex="-1">2ï¼‰å­—ç´ ç°‡ï¼ˆgraphemeï¼‰å®‰å…¨ <a class="header-anchor" href="#_2-å­—ç´ ç°‡-grapheme-å®‰å…¨" aria-label="Permalink to &quot;2ï¼‰å­—ç´ ç°‡ï¼ˆgraphemeï¼‰å®‰å…¨&quot;">â€‹</a></h2><ul><li><code>Intl.Segmenter(..., { granularity: &#39;grapheme&#39; })</code> è·å–<strong>å¯è§å­—ç¬¦</strong>åˆ—è¡¨ï¼Œé¿å…æˆªæ–­ emoji/ZWJ/æ——å¸œ/å˜ä½“ç­‰ã€‚</li><li><strong>ç»Ÿä¸€è®¡æ•°å£å¾„</strong>ï¼šé™åˆ¶â€œ40 ä¸ªâ€æŒ‡ <strong>å­—ç´ ç°‡æ•°</strong> è€Œä¸æ˜¯ code point æˆ–å­—èŠ‚ã€‚</li></ul><h2 id="_3-åƒç´ çº§æµ‹é‡" tabindex="-1">3ï¼‰åƒç´ çº§æµ‹é‡ <a class="header-anchor" href="#_3-åƒç´ çº§æµ‹é‡" aria-label="Permalink to &quot;3ï¼‰åƒç´ çº§æµ‹é‡&quot;">â€‹</a></h2><ul><li><code>canvas.getContext(&#39;2d&#39;).measureText()</code>ï¼Œç”¨å…ƒç´ <strong>çœŸå®çš„ font ç»„åˆ</strong>ï¼ˆåŒ…å« <code>fontStyle/fontWeight/fontStretch/fontSize/fontFamily</code>ï¼‰æµ‹å®½ï¼Œé¿å…è¯¯å·®ã€‚</li><li><strong>å¯å‘å¼æ‰©å±•</strong>ï¼ˆé¦–å°¾äº¤æ›¿å¢åŠ å­—ç´ æ•°ï¼‰åœ¨å‡†ç¡®åº¦å’Œé€Ÿåº¦ä¹‹é—´å¹³è¡¡ï¼›éå¸¸é•¿å­—ç¬¦ä¸²å¯åŠ å…¥<strong>ä¸Šé™ä¿æŠ¤</strong>ã€‚</li></ul><h2 id="_4-è§‚å¯Ÿå™¨ä¸æ¸²æŸ“èŠ‚æµ" tabindex="-1">4ï¼‰è§‚å¯Ÿå™¨ä¸æ¸²æŸ“èŠ‚æµ <a class="header-anchor" href="#_4-è§‚å¯Ÿå™¨ä¸æ¸²æŸ“èŠ‚æµ" aria-label="Permalink to &quot;4ï¼‰è§‚å¯Ÿå™¨ä¸æ¸²æŸ“èŠ‚æµ&quot;">â€‹</a></h2><ul><li><p><strong>ResizeObserver â†’ rAF åˆå¹¶</strong>ï¼šRO åªåšè°ƒåº¦ï¼Œå®é™…æ¸²æŸ“æ”¾åˆ° <code>requestAnimationFrame</code>ï¼Œä¸€å¸§ä¸€æ¬¡ï¼Œé¿å…è¿ç¯è§¦å‘ã€‚</p></li><li><p><strong>MutationObserver é™å®š</strong>ï¼šåªåœ¨â€œå¤–éƒ¨çœŸå®å˜æ›´â€æ—¶æ›´æ–° <code>original</code>ï¼›å†…éƒ¨å†™ <code>textContent</code> ä½¿ç”¨</p><ul><li><code>isInternalUpdate</code> æ ‡è®°</li><li><code>suppressMutations</code> è®¡æ•° + <code>queueMicrotask</code> å½’é›¶ æ¥<strong>å±è”½æœ¬è½®å›è°ƒ</strong>ã€‚</li></ul></li><li><p><strong>è„æ£€æŸ¥</strong>ï¼š<code>dataset</code> ç¼“å­˜ <code>mode/lines</code>ï¼Œç›¸åŒæ ·å¼ä¸é‡å¤å†™ï¼Œåˆ‡æ–­ RO å›è·¯ã€‚</p></li></ul><h2 id="_5-å¯è®¿é—®æ€§ä¸-tooltip-ä¸æ±¡æŸ“" tabindex="-1">5ï¼‰å¯è®¿é—®æ€§ä¸ Tooltip ä¸æ±¡æŸ“ <a class="header-anchor" href="#_5-å¯è®¿é—®æ€§ä¸-tooltip-ä¸æ±¡æŸ“" aria-label="Permalink to &quot;5ï¼‰å¯è®¿é—®æ€§ä¸ Tooltip ä¸æ±¡æŸ“&quot;">â€‹</a></h2><ul><li><code>applyA11y(el, full, tooltip)</code>ï¼š<code>aria-label</code>/<code>title</code> æ°¸è¿œç”¨<strong>åŸæ–‡</strong>ï¼ˆ<code>state.original</code>ï¼‰ï¼Œä¸å±•ç¤ºå±‚è§£è€¦ã€‚</li><li>å¯é¢å¤–å†™ <code>data-sn-full</code> ä¾›ç¬¬ä¸‰æ–¹ Tooltip è¯»å–ã€‚</li></ul><h2 id="_6-å¸ƒå±€è¦ç‚¹-é¿å…-çœ‹ä¼¼å¤±æ•ˆ-çš„æ ¹å› " tabindex="-1">6ï¼‰å¸ƒå±€è¦ç‚¹ï¼ˆé¿å…â€œçœ‹ä¼¼å¤±æ•ˆâ€çš„æ ¹å› ï¼‰ <a class="header-anchor" href="#_6-å¸ƒå±€è¦ç‚¹-é¿å…-çœ‹ä¼¼å¤±æ•ˆ-çš„æ ¹å› " aria-label="Permalink to &quot;6ï¼‰å¸ƒå±€è¦ç‚¹ï¼ˆé¿å…â€œçœ‹ä¼¼å¤±æ•ˆâ€çš„æ ¹å› ï¼‰&quot;">â€‹</a></h2><ul><li>Flex è¡Œï¼š<strong>çˆ¶å®¹å™¨</strong>åŠ  <code>min-w-0 w-full</code>ï¼Œæ˜µç§°åˆ— <code>flex-1 min-w-0 overflow-hidden</code>ï¼Œå›¾æ ‡ <code>shrink-0</code>ã€‚</li><li>Gridï¼šæ˜µç§°åˆ—ç”¨ <code>minmax(0, 1fr)</code>ï¼Œå•å…ƒæ ¼ <code>min-w-0 overflow-hidden</code>ã€‚</li><li>æŒ‡ä»¤å†…éƒ¨åŠ  <code>max-width: 100%</code> å…œåº•ã€‚</li></ul><h2 id="_7-ssr-hydration" tabindex="-1">7ï¼‰SSR/Hydration <a class="header-anchor" href="#_7-ssr-hydration" aria-label="Permalink to &quot;7ï¼‰SSR/Hydration&quot;">â€‹</a></h2><ul><li>æŒ‡ä»¤é€»è¾‘ä»…åœ¨ <code>mounted</code> åç”Ÿæ•ˆï¼›SSR è¾“å‡ºâ€œåŸæ–‡ + CSS ç±»â€å³å¯ã€‚</li><li>è‹¥éœ€ SSR ç«¯çš„ä¿å®ˆæˆªæ–­ï¼Œå¯ç”¨<strong>å­—ç´ ç°‡</strong>å…ˆæˆªè‡³ä¸Šé™ï¼Œå†åœ¨å®¢æˆ·ç«¯åšåƒç´ çº§æ ¡æ­£ã€‚</li></ul><hr><h1 id="å¸¸è§å‘ä½ä¸å¯¹åº”ä¿®å¤" tabindex="-1">å¸¸è§å‘ä½ä¸å¯¹åº”ä¿®å¤ <a class="header-anchor" href="#å¸¸è§å‘ä½ä¸å¯¹åº”ä¿®å¤" aria-label="Permalink to &quot;å¸¸è§å‘ä½ä¸å¯¹åº”ä¿®å¤&quot;">â€‹</a></h1><ul><li><p><strong>ä¸ºä»€ä¹ˆæ²¡æœ‰çœç•¥ï¼Ÿ</strong></p><ul><li>å¿˜äº† <code>min-w-0</code>ï¼Œæˆ–è€…çˆ¶å®¹å™¨æ²¡ <code>w-full</code>ï¼›</li><li>æœ‰ <code>whitespace-nowrap</code> æŠ¢æˆï¼›</li><li>é‚»è¿‘å›¾æ ‡æœª <code>shrink-0</code> å¯¼è‡´å®½åº¦åå¤ç«äº‰ã€‚</li></ul></li><li><p><strong>æ­»å¾ªç¯/é«˜é¢‘æ¸²æŸ“ï¼Ÿ</strong></p><ul><li>RO ç›´æ¥è§¦å‘æ¸²æŸ“ï¼ˆç¼ºå°‘ rAF åˆå¹¶ï¼‰ï¼›</li><li>MO æ²¡å±è”½å†…éƒ¨æ›´æ–°ï¼›</li><li>æ¯æ¬¡éƒ½é‡å†™ç›¸åŒæ ·å¼ï¼ˆç¼ºå°‘è„æ£€æŸ¥ï¼‰ã€‚</li></ul></li><li><p><strong>tooltip æ˜¾ç¤ºæˆâ€œâ€¦â€ï¼Ÿ</strong></p><ul><li>å…ˆå†™ <code>title</code> å†æ”¹ <code>textContent</code> ä¸”åŒæ­¥äº† <code>original</code>ï¼›</li><li>ç°æ–¹æ¡ˆå·²ç”¨<strong>æŠ‘åˆ¶ + æœ«å°¾ç»Ÿä¸€å†™åŸæ–‡</strong>ä¿®å¤ã€‚</li></ul></li></ul><hr><h1 id="æ€§èƒ½å»ºè®®-åˆ—è¡¨-è¡¨æ ¼-1k-è¡Œ" tabindex="-1">æ€§èƒ½å»ºè®®ï¼ˆåˆ—è¡¨/è¡¨æ ¼ 1k+ è¡Œï¼‰ <a class="header-anchor" href="#æ€§èƒ½å»ºè®®-åˆ—è¡¨-è¡¨æ ¼-1k-è¡Œ" aria-label="Permalink to &quot;æ€§èƒ½å»ºè®®ï¼ˆåˆ—è¡¨/è¡¨æ ¼ 1k+ è¡Œï¼‰&quot;">â€‹</a></h1><ul><li>èƒ½ç”¨ <strong><code>mode: &#39;one-line&#39;|&#39;multi-line&#39;</code> å°±ä¸ç”¨ JS</strong>ï¼›ä¸­é—´çœç•¥ä»…åœ¨ç¡®éœ€ä¿ç•™é¦–å°¾ä¿¡æ¯æ—¶å¼€ã€‚</li><li>è™šæ‹Ÿæ»šåŠ¨åœºæ™¯ï¼š<strong>åªç›‘å¬å¯è§èŠ‚ç‚¹</strong>ï¼›å…³é—­ <code>observeText</code> æˆ–åœ¨ä¸šåŠ¡ä¾§åˆå¹¶å¤šæ¬¡å˜æ›´ã€‚</li><li>ç¼“å­˜æµ‹é‡ï¼šåŒä¸€å­—ä½“çš„ <code>measureText</code> å¯å¤ç”¨ <code>ctx</code>ï¼›é’ˆå¯¹ç›¸åŒå­—ç¬¦ä¸²ï¼ˆå¦‚é‡å¤æ˜µç§°ï¼‰å¯åŠ  Map ç¼“å­˜ï¼ˆæ³¨æ„å®¹å™¨å®½ä¸åŒä»è¦é‡ç®—ï¼‰ã€‚</li></ul><hr><h1 id="ç»´æŠ¤ä¸æ‰©å±•å»ºè®®" tabindex="-1">ç»´æŠ¤ä¸æ‰©å±•å»ºè®® <a class="header-anchor" href="#ç»´æŠ¤ä¸æ‰©å±•å»ºè®®" aria-label="Permalink to &quot;ç»´æŠ¤ä¸æ‰©å±•å»ºè®®&quot;">â€‹</a></h1><ul><li><p><strong>API ç¨³å®šé¢</strong>ï¼š<code>mode | lines | tooltip | dirAuto | observeText | preferCSS</code> å·²è¦†ç›–ä¸»éœ€æ±‚ï¼Œ<strong>ä¿æŒæœ€å°åŒ–</strong>ã€‚</p></li><li><p><strong>æ‰©å±•ç‚¹</strong>ï¼š</p><ul><li><code>maxGraphemes</code>ï¼šåœ¨æ˜¾ç¤ºå‰åš<strong>è½¯é™åˆ¶</strong>æç¤ºï¼ˆä¸å¼ºåˆ¶æ”¹å†™ï¼‰ï¼›</li><li><code>reservePx</code>ï¼šä¸ºå³ä¾§æŒ‰é’®é¢„ç•™åƒç´ è¾¹è·ï¼ˆä½ çš„ <code>middleEllipsisByWidth</code> å·²ç•™å‚æ•°ï¼‰ã€‚</li></ul></li><li><p><strong>å•æµ‹/E2E å»ºè®®</strong>ï¼š</p><ul><li>æ–‡æœ¬é›†ï¼šè‹±æ–‡/CJK/æ··æ’ã€emoji + ZWJã€é•¿è¿ç»­ tokenã€RTLï¼›</li><li>å¸ƒå±€ï¼šFlex/Gridã€æçª„/æå®½å®¹å™¨ï¼›</li><li>è¡Œä¸ºï¼šçª—å£ resizeã€i18n åˆ‡æ¢ã€å¿«é€Ÿå¤šæ¬¡æ›´æ–°ï¼›</li><li>å¯è¾¾æ€§ï¼š<code>title</code> å§‹ç»ˆä¸ºåŸæ–‡ã€‚</li></ul></li></ul><hr><h1 id="_80-éœ€æ±‚çš„-è½»é‡ç‰ˆæ¨¡æ¿-ä¾¿äºæ–°é¡µé¢å¿«é€Ÿè½åœ°" tabindex="-1">80% éœ€æ±‚çš„â€œè½»é‡ç‰ˆæ¨¡æ¿â€ï¼ˆä¾¿äºæ–°é¡µé¢å¿«é€Ÿè½åœ°ï¼‰ <a class="header-anchor" href="#_80-éœ€æ±‚çš„-è½»é‡ç‰ˆæ¨¡æ¿-ä¾¿äºæ–°é¡µé¢å¿«é€Ÿè½åœ°" aria-label="Permalink to &quot;80% éœ€æ±‚çš„â€œè½»é‡ç‰ˆæ¨¡æ¿â€ï¼ˆä¾¿äºæ–°é¡µé¢å¿«é€Ÿè½åœ°ï¼‰&quot;">â€‹</a></h1><blockquote><p>ä¸æ¶‰åŠä½ ç°æœ‰æ–‡ä»¶ï¼Œåªæ˜¯<strong>æ¨¡æ¿è®°å¿†</strong>ï¼Œä»¥åå¤åˆ¶å³ç”¨ã€‚</p></blockquote><ul><li><p><strong>æ¨¡æ¿ç±»</strong>ï¼š</p><ul><li>çˆ¶ï¼š<code>flex items-center gap-2 min-w-0 w-full</code></li><li>åç§°ï¼š<code>flex-1 min-w-0 overflow-hidden</code></li><li>å›¾æ ‡ï¼š<code>shrink-0</code></li></ul></li><li><p><strong>æŒ‡ä»¤å‚æ•°</strong>ï¼š</p><ul><li>å•è¡Œï¼š<code>v-smart-name=&quot;{ mode: &#39;one-line&#39;, tooltip: true }&quot;</code></li><li>å¤šè¡Œï¼š<code>v-smart-name=&quot;{ mode: &#39;multi-line&#39;, lines: 2, tooltip: true }&quot;</code></li><li>ä¸­é—´çœç•¥ï¼ˆç¡®éœ€é¦–å°¾å¯è§ï¼‰ï¼š<code>v-smart-name=&quot;{ mode: &#39;middle-ellipsis&#39;, tooltip: true }&quot;</code></li></ul></li></ul><hr><h1 id="ä½ ç°åœ¨è¿™ä»½å®ç°çš„æœ€ç»ˆå»ºè®®" tabindex="-1">ä½ ç°åœ¨è¿™ä»½å®ç°çš„æœ€ç»ˆå»ºè®® <a class="header-anchor" href="#ä½ ç°åœ¨è¿™ä»½å®ç°çš„æœ€ç»ˆå»ºè®®" aria-label="Permalink to &quot;ä½ ç°åœ¨è¿™ä»½å®ç°çš„æœ€ç»ˆå»ºè®®&quot;">â€‹</a></h1><ul><li><strong>ä¿ç•™ç°å®ç°</strong>ä½œä¸º<strong>é€šç”¨æŒ‡ä»¤</strong>ï¼›</li><li>åœ¨<strong>é«˜é¢‘åˆ—è¡¨</strong>é‡Œé»˜è®¤ç”¨ <code>mode:&#39;one-line&#39;</code> æˆ– <code>multi-line</code>ï¼›åªæœ‰â€œå¡ç‰‡æ ‡é¢˜ä¿ç•™é¦–å°¾ä¿¡æ¯â€ç­‰åœºæ™¯å¯ç”¨ <code>middle-ellipsis</code>ï¼›</li><li>æŠŠâ€œå¸ƒå±€è¾…åŠ©ç±»â€ï¼ˆ<code>min-w-0 / w-full / flex-1 / shrink-0</code>ï¼‰å†™è¿›å›¢é˜Ÿçš„<strong>ç»„ä»¶æ ·å¼è§„èŒƒ</strong>æˆ–å°è£…æˆå°ç»„ä»¶ï¼Œå‡å°‘è¸©å‘ã€‚</li></ul><p>æœ‰äº†è¿™ä»½æ€»ç»“ï¼Œä½ ä»¬ä»¥ååªéœ€ï¼š<strong>æŒ‰æ¨¡æ¿æ‘†å¯¹å¸ƒå±€ç±» â†’ é€‰å¯¹ mode â†’ï¼ˆå¿…è¦æ—¶ï¼‰æ‰“å¼€ä¸­é—´çœç•¥</strong>ï¼Œå…¶ä½™ç»†èŠ‚äº¤ç»™æŒ‡ä»¤å³å¯ã€‚</p><hr><p>title: é™¤äº†è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œè¿˜èƒ½æ€æ ·å°è£…â€œæ˜µç§°ç¨³å®šå±•ç¤ºâ€ï¼Ÿï¼ˆå¤šæ–¹æ¡ˆå¯¹æ¯”ä¸æœ€å°ç‰‡æ®µï¼‰ date: 2025-09-19 tags:</p><ul><li>Vue3</li><li>ç»„ä»¶è®¾è®¡</li><li>Composable</li><li>Tailwind æ’ä»¶</li><li>Web Components</li></ul><hr><h1 id="ç»“è®ºé€Ÿè§ˆ" tabindex="-1">ç»“è®ºé€Ÿè§ˆ <a class="header-anchor" href="#ç»“è®ºé€Ÿè§ˆ" aria-label="Permalink to &quot;ç»“è®ºé€Ÿè§ˆ&quot;">â€‹</a></h1><p>åœ¨ä½ çš„æŒ‡ä»¤å·²ç¨³å®šå¯ç”¨çš„åŸºç¡€ä¸Šï¼Œ<strong>æ›´æ˜“ç»´æŠ¤/å¤ç”¨/æµ‹è¯•</strong>çš„æ›¿ä»£å°è£…ä¸»è¦æœ‰ 5 ç§ï¼š <strong>å‡½æ•°å¼ç»„ä»¶</strong>ã€<strong>renderless ç»„ä»¶</strong>ã€<strong>composable é’©å­</strong>ã€<strong>Tailwind æ’ä»¶ï¼ˆCSS å±‚æ ‡å‡†åŒ–ï¼‰</strong>ã€<strong>Web Componentï¼ˆè·¨æ¡†æ¶ï¼‰</strong>ã€‚ æ¨èä¼˜å…ˆçº§ï¼š<strong>å‡½æ•°å¼ç»„ä»¶ â‰¥ renderless ç»„ä»¶ &gt; composable &gt; Tailwind æ’ä»¶ &gt; Web Component</strong>ã€‚</p><hr><h1 id="_1-å‡½æ•°å¼ç»„ä»¶-smartnametext-æ¨è" tabindex="-1">1) å‡½æ•°å¼ç»„ä»¶ <code>&lt;SmartNameText&gt;</code>ï¼ˆæ¨èï¼‰ <a class="header-anchor" href="#_1-å‡½æ•°å¼ç»„ä»¶-smartnametext-æ¨è" aria-label="Permalink to &quot;1) å‡½æ•°å¼ç»„ä»¶ \`&lt;SmartNameText&gt;\`ï¼ˆæ¨èï¼‰&quot;">â€‹</a></h1><p>é€‚åˆå…¨ç«™ç»Ÿä¸€é£æ ¼ã€å¯æµ‹è¯•ã€å¯ä¸ä¸‰æ–¹ Tooltip æ·±åº¦é›†æˆã€‚</p><h2 id="æœ€å°æ”¹åŠ¨ç‰‡æ®µ" tabindex="-1">æœ€å°æ”¹åŠ¨ç‰‡æ®µ <a class="header-anchor" href="#æœ€å°æ”¹åŠ¨ç‰‡æ®µ" aria-label="Permalink to &quot;æœ€å°æ”¹åŠ¨ç‰‡æ®µ&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸Šä¸€è¡Œæ³¨é‡Šï¼šå£°æ˜ propsï¼Œå¤ç”¨ä½ æŒ‡ä»¤çš„ optionsï¼ˆæ— å¤æ‚é€»è¾‘ç²˜è´´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SmartNameProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;one-line&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;multi-line&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;middle-ellipsis&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;auto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  tooltip</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  dirAuto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸Šä¸€è¡Œæ³¨é‡Šï¼šåœ¨ &lt;script setup&gt; å†…ç”¨ &lt;SmartNameText :text=&quot;nickname&quot; ... /&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»„ä»¶å†…éƒ¨ï¼šç”¨ä¸€ä¸ª &lt;span ref&gt; æ‰¿è½½ï¼Œå¤ç”¨ç°æœ‰æ ¸å¿ƒé€»è¾‘ï¼ˆsegment/measure/ro/moï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…³é”®ä¸åŒï¼štitle/aria ç­‰â€œå¤–éƒ¨å¯è§å±æ€§â€ç”±ç»„ä»¶æ§åˆ¶ï¼Œé¿å…æŒ‡ä»¤å’Œå®¿ä¸»å…ƒç´ å¹²æ‰°</span></span></code></pre></div><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- ä½¿ç”¨å¤„æœ€å°æ›¿æ¢ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ink-18 ... flex-1 min-w-0 overflow-hidden&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  v-smart-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;one-line&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tooltip: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{ nickname }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">SmartNameText</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ink-18 ... flex-1 min-w-0 overflow-hidden&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nickname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;one-line&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tooltip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre></div><p><strong>ä¼˜ç‚¹</strong>ï¼šè¾¹ç•Œæ¸…æ™°ã€æ˜“ mock/å•æµ‹ã€ä¸è®¾è®¡ç³»ç»Ÿå¥‘åˆï¼›SSR æ›´å¯æ§ï¼›Tooltip å¯ç›´æ¥ç”¨ç»„ä»¶åº“ï¼ˆ<code>a-tooltip</code>/<code>el-tooltip</code>ï¼‰ã€‚ <strong>æ³¨æ„</strong>ï¼šå†…éƒ¨é€»è¾‘ç›´æ¥æ¬ä½ æŒ‡ä»¤ <code>mountSmartName</code> çš„å®ç°ï¼Œæ¢æˆ <code>onMounted/onUpdated/onBeforeUnmount</code> ç®¡ç†è§‚å¯Ÿå™¨å³å¯ã€‚</p><hr><h1 id="_2-renderless-ç»„ä»¶-æ’æ§½æš´éœ²-display-ä¸-attrs" tabindex="-1">2) Renderless ç»„ä»¶ï¼ˆæ’æ§½æš´éœ² display ä¸ attrsï¼‰ <a class="header-anchor" href="#_2-renderless-ç»„ä»¶-æ’æ§½æš´éœ²-display-ä¸-attrs" aria-label="Permalink to &quot;2) Renderless ç»„ä»¶ï¼ˆæ’æ§½æš´éœ² display ä¸ attrsï¼‰&quot;">â€‹</a></h1><p>æŠŠè®¡ç®—å’Œè§‚å¯Ÿæ”¾åˆ°ç»„ä»¶é‡Œï¼Œ<strong>å±•ç¤ºäº¤ç»™æ’æ§½</strong>ï¼Œå…¼é¡¾çµæ´»æ€§ä¸å¯æµ‹è¯•æ€§ã€‚</p><h2 id="æœ€å°æ”¹åŠ¨ç‰‡æ®µ-1" tabindex="-1">æœ€å°æ”¹åŠ¨ç‰‡æ®µ <a class="header-anchor" href="#æœ€å°æ”¹åŠ¨ç‰‡æ®µ-1" aria-label="Permalink to &quot;æœ€å°æ”¹åŠ¨ç‰‡æ®µ&quot;">â€‹</a></h2><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- ä¸Šä¸€è¡Œæ³¨é‡Šï¼šrenderless ç»„ä»¶ç”¨æ³•ç¤ºä¾‹ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">SmartName</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  v-slot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ display, attrs }</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nickname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;auto&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lines</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tooltip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;!-- ä¸Šä¸€è¡Œæ³¨é‡Šï¼šattrs åŒ…å« aria-label/title/dir ç­‰ï¼›display æ˜¯å·²å¤„ç†çš„å±•ç¤ºå€¼ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;span class=&quot;flex-1 min-w-0 overflow-hidden ink-18 ...&quot; v-bind=&quot;attrs&quot;&gt;{{ display }}&lt;/span&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">SmartName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸Šä¸€è¡Œæ³¨é‡Šï¼šSmartName å†…éƒ¨ä»…è´Ÿè´£ï¼šç›‘å¬å®½åº¦/æ–‡æœ¬ã€è®¡ç®—ä¸­é—´çœç•¥ã€è¾“å‡º {display, attrs}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">expose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ display, attrs });</span></span></code></pre></div><p><strong>ä¼˜ç‚¹</strong>ï¼šå±•ç¤ºå®Œå…¨é¢å‘ä¸šåŠ¡è‡ªå®šä¹‰ï¼›é€»è¾‘å°è£…åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚ <strong>é€‚ç”¨</strong>ï¼šä¸åŒé¡µé¢éœ€è¦ä¸åŒæ ‡ç­¾ç»“æ„/å›¾æ ‡ç©¿æ’çš„å¤æ‚æ’ç‰ˆã€‚</p><hr><h1 id="_3-composable-usesmartname-el-options-æ›´è½»ã€æ›´è´´è¿‘æŒ‡ä»¤" tabindex="-1">3) Composableï¼š<code>useSmartName(el, options)</code>ï¼ˆæ›´è½»ã€æ›´è´´è¿‘æŒ‡ä»¤ï¼‰ <a class="header-anchor" href="#_3-composable-usesmartname-el-options-æ›´è½»ã€æ›´è´´è¿‘æŒ‡ä»¤" aria-label="Permalink to &quot;3) Composableï¼š\`useSmartName(el, options)\`ï¼ˆæ›´è½»ã€æ›´è´´è¿‘æŒ‡ä»¤ï¼‰&quot;">â€‹</a></h1><p>å½“ä½ ä¸æƒ³å¼•å…¥æ–°ç»„ä»¶ã€ä½†åˆå¸Œæœ›<strong>æŒ‰éœ€æ§åˆ¶</strong>ç”Ÿå‘½å‘¨æœŸä¸ä¾èµ–æ—¶ã€‚</p><h2 id="æœ€å°æ”¹åŠ¨ç‰‡æ®µ-2" tabindex="-1">æœ€å°æ”¹åŠ¨ç‰‡æ®µ <a class="header-anchor" href="#æœ€å°æ”¹åŠ¨ç‰‡æ®µ-2" aria-label="Permalink to &quot;æœ€å°æ”¹åŠ¨ç‰‡æ®µ&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸Šä¸€è¡Œæ³¨é‡Šï¼šåœ¨é¡µé¢ç»„ä»¶é‡Œä½¿ç”¨ composableï¼Œæ›¿ä»£æŒ‡ä»¤</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nameRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HTMLElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useSmartName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nameRef.value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { mode:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;one-line&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tooltip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onBeforeUnmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?.())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸Šä¸€è¡Œæ³¨é‡Šï¼šæ¨¡æ¿ä¸­åªç•™ refï¼Œä¸å†è´´æŒ‡ä»¤</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">span ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nameRef&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flex-1 min-w-0 overflow-hidden ink-18 ...&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ nickname }}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">span</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸Šä¸€è¡Œæ³¨é‡Šï¼šuseSmartName å†…éƒ¨ç›´æ¥æ¬ä½ æŒ‡ä»¤çš„æ ¸å¿ƒï¼ˆRO/MO/æµ‹é‡/tooltip æŠ‘åˆ¶ï¼‰å¹¶è¿”å› cleanup</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useSmartName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">opts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* å¤ç”¨ mountSmartName */</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cleanup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>ä¼˜ç‚¹</strong>ï¼šä»£ç æœ€å°‘ã€é€»è¾‘é›†ä¸­ã€æ˜“å¤ç”¨åˆ° TS é€»è¾‘å±‚ï¼› <strong>æ³¨æ„</strong>ï¼šå›¢é˜Ÿæˆå‘˜è¦è®°å¾—ç»‘å®š <code>ref</code> å’Œåœ¨æ­£ç¡®ç”Ÿå‘½å‘¨æœŸè°ƒç”¨ã€‚</p><hr><h1 id="_4-tailwind-æ’ä»¶-ç»Ÿä¸€-css-è¯­ä¹‰ç±»-è¦†ç›–-80-åœºæ™¯" tabindex="-1">4) Tailwind æ’ä»¶ï¼šç»Ÿä¸€ CSS è¯­ä¹‰ç±»ï¼ˆè¦†ç›– 80% åœºæ™¯ï¼‰ <a class="header-anchor" href="#_4-tailwind-æ’ä»¶-ç»Ÿä¸€-css-è¯­ä¹‰ç±»-è¦†ç›–-80-åœºæ™¯" aria-label="Permalink to &quot;4) Tailwind æ’ä»¶ï¼šç»Ÿä¸€ CSS è¯­ä¹‰ç±»ï¼ˆè¦†ç›– 80% åœºæ™¯ï¼‰&quot;">â€‹</a></h1><p>æŠŠ<strong>å•/å¤šè¡Œçœç•¥</strong>ã€æ–­è¡Œç­–ç•¥åšæˆå¯å¤ç”¨çš„å·¥å…·ç±»ï¼Œ<strong>æ—  JS</strong> æƒ…å†µä¸‹å…ˆåƒä¸‹å¤§éƒ¨åˆ†é¡µé¢ã€‚</p><h2 id="æœ€å°æ”¹åŠ¨ç‰‡æ®µ-3" tabindex="-1">æœ€å°æ”¹åŠ¨ç‰‡æ®µ <a class="header-anchor" href="#æœ€å°æ”¹åŠ¨ç‰‡æ®µ-3" aria-label="Permalink to &quot;æœ€å°æ”¹åŠ¨ç‰‡æ®µ&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// tailwind.config.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">addUtilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  addUtilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;.name-one-line&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      display: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;block&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      whiteSpace: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nowrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      overflow: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hidden&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      textOverflow: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ellipsis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      maxWidth: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;.name-two-lines&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      display: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-webkit-box&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      WebkitBoxOrient: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vertical&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      WebkitLineClamp: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      overflow: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hidden&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      whiteSpace: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;normal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      lineBreak: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;auto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      wordBreak: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;break-word&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      overflowWrap: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;anywhere&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      maxWidth: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- &lt;span class=&quot;ink-18 ...&quot; v-smart-name=&quot;{ mode:&#39;multi-line&#39;, lines:2 }&quot;&gt;{{ nickname }}&lt;/span&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ &lt;span class=&quot;ink-18 ... name-two-lines&quot;&gt;{{ nickname }}&lt;/span&gt;</span></span></code></pre></div><p><strong>ä¼˜ç‚¹</strong>ï¼šç»Ÿä¸€æ ·å¼è¯­ä¹‰ã€æç®€ã€æ€§èƒ½æœ€å¥½ï¼› <strong>é™åˆ¶</strong>ï¼šé‡åˆ°â€œä¸­é—´çœç•¥â€ä»éœ€ JSï¼ˆç»„ä»¶/æŒ‡ä»¤/é’©å­ä¸‰é€‰ä¸€ï¼‰ã€‚</p><hr><h1 id="_5-web-component-smart-name-è·¨æ¡†æ¶-å¾®å‰ç«¯" tabindex="-1">5) Web Component <code>&lt;smart-name&gt;</code>ï¼ˆè·¨æ¡†æ¶/å¾®å‰ç«¯ï¼‰ <a class="header-anchor" href="#_5-web-component-smart-name-è·¨æ¡†æ¶-å¾®å‰ç«¯" aria-label="Permalink to &quot;5) Web Component \`&lt;smart-name&gt;\`ï¼ˆè·¨æ¡†æ¶/å¾®å‰ç«¯ï¼‰&quot;">â€‹</a></h1><p>å½“ä½ çš„é¡¹ç›®å­˜åœ¨ <strong>å¤šæŠ€æœ¯æ ˆ</strong>ï¼ˆVue/React/çº¯ HTMLï¼‰çš„å¤ç”¨éœ€æ±‚ã€‚</p><h2 id="æœ€å°æ”¹åŠ¨ç‰‡æ®µ-4" tabindex="-1">æœ€å°æ”¹åŠ¨ç‰‡æ®µ <a class="header-anchor" href="#æœ€å°æ”¹åŠ¨ç‰‡æ®µ-4" aria-label="Permalink to &quot;æœ€å°æ”¹åŠ¨ç‰‡æ®µ&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸Šä¸€è¡Œæ³¨é‡Šï¼šæ³¨å†Œè‡ªå®šä¹‰å…ƒç´ ï¼Œå¯è·¨æ¡†æ¶ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SmartNameEl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> observedAttributes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lines&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tooltip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  connectedCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* init: å¤ç”¨æ ¸å¿ƒé€»è¾‘ï¼Œç›‘å¬ this.textContent */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  attributeChangedCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* å˜æ›´æ—¶é‡ç®— */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  disconnectedCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* cleanup */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">customElements.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;smart-name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, SmartNameEl);</span></span></code></pre></div><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- ä½¿ç”¨ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">smart-name</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;one-line&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tooltip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ç‹è€…è£è€€ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦çš„è¶…çº§è¶…é•¿æ˜µç§°&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">smart-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p><strong>ä¼˜ç‚¹</strong>ï¼šæ¡†æ¶æ— å…³ã€å‘å¸ƒæˆç‹¬ç«‹åŒ…ï¼› <strong>æˆæœ¬</strong>ï¼šäº‹ä»¶/æ ·å¼éš”ç¦»ã€ä¸æ¡†æ¶è·¯ç”±/SSR åä½œç»†èŠ‚è¦é¢å¤–å¤„ç†ã€‚</p><hr><h1 id="ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸€ç§" tabindex="-1">ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸€ç§ï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸€ç§" aria-label="Permalink to &quot;ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸€ç§ï¼Ÿ&quot;">â€‹</a></h1><ul><li><strong>é¡¹ç›®å†…ç»Ÿä¸€ã€å¯æµ‹è¯•ã€æ˜“æ¥ç¬¬ä¸‰æ–¹ Tooltip</strong> â†’ ç”¨ <strong>å‡½æ•°å¼ç»„ä»¶</strong>ã€‚</li><li><strong>å¸ƒå±€å¤æ‚ã€éœ€è¦å°†â€œæ˜¾ç¤ºå€¼ä¸å±æ€§â€äº¤å›æ¨¡æ¿</strong> â†’ <strong>renderless ç»„ä»¶</strong>ã€‚</li><li><strong>å·²æœ‰å¤§é‡æ¨¡æ¿ï¼Œä¸æƒ³æ”¹æ ‡ç­¾ç»“æ„</strong> â†’ <strong>æŒ‡ä»¤</strong> æˆ– <strong>composable</strong>ã€‚</li><li><strong>åªè¦å•/å¤šè¡Œçœç•¥</strong> â†’ <strong>Tailwind æ’ä»¶</strong> å³å¯ã€‚</li><li><strong>å¤šæŠ€æœ¯æ ˆ/å¾®å‰ç«¯å…±ç”¨</strong> â†’ <strong>Web Component</strong>ã€‚</li></ul><hr><h1 id="ä½ å½“å‰é¡¹ç›®çš„è½åœ°å»ºè®®-æœ€å°‘è¿ç§»æˆæœ¬" tabindex="-1">ä½ å½“å‰é¡¹ç›®çš„è½åœ°å»ºè®®ï¼ˆæœ€å°‘è¿ç§»æˆæœ¬ï¼‰ <a class="header-anchor" href="#ä½ å½“å‰é¡¹ç›®çš„è½åœ°å»ºè®®-æœ€å°‘è¿ç§»æˆæœ¬" aria-label="Permalink to &quot;ä½ å½“å‰é¡¹ç›®çš„è½åœ°å»ºè®®ï¼ˆæœ€å°‘è¿ç§»æˆæœ¬ï¼‰&quot;">â€‹</a></h1><ol><li><strong>ä¿ç•™æŒ‡ä»¤</strong>ç”¨äºå†å²é¡µé¢ï¼›</li><li>æ–°é¡µé¢/æ–°ç»„ä»¶ç»Ÿä¸€ç”¨ <strong><code>&lt;SmartNameText&gt;</code> å‡½æ•°å¼ç»„ä»¶</strong>ï¼›</li><li>Tailwind é…ä¸€å¥— <code>.name-one-line</code> / <code>.name-two-lines</code>ï¼Œè¦†ç›–ä¸éœ€è¦â€œä¸­é—´çœç•¥â€çš„ 80% åœºæ™¯ï¼›</li><li>åˆ—è¡¨/è¡¨æ ¼é»˜è®¤åªç”¨ CSS ç±»ï¼›**ä»…å½“ç¡®éœ€â€œä¸­é—´çœç•¥â€**æ—¶ï¼Œæ›¿æ¢ä¸ºç»„ä»¶ï¼ˆæˆ–å¯ç”¨ <code>mode:&#39;middle-ellipsis&#39;</code>ï¼‰ã€‚</li></ol><hr><h1 id="å¤ç”¨æ¸…å•-å¤åˆ¶å³ç”¨" tabindex="-1">å¤ç”¨æ¸…å•ï¼ˆå¤åˆ¶å³ç”¨ï¼‰ <a class="header-anchor" href="#å¤ç”¨æ¸…å•-å¤åˆ¶å³ç”¨" aria-label="Permalink to &quot;å¤ç”¨æ¸…å•ï¼ˆå¤åˆ¶å³ç”¨ï¼‰&quot;">â€‹</a></h1><ul><li><strong>å¸ƒå±€æ¨¡æ¿</strong>ï¼šçˆ¶å®¹å™¨ <code>min-w-0 w-full</code>ï¼Œæ–‡æœ¬åˆ— <code>flex-1 min-w-0 overflow-hidden</code>ï¼Œå›¾æ ‡ <code>shrink-0</code>ã€‚</li><li><strong>API é¢</strong>ï¼ˆç»„ä»¶/æŒ‡ä»¤/é’©å­å…±ç”¨ï¼‰ï¼š<code>mode | lines | tooltip | dirAuto | observeText | preferCSS</code>ã€‚</li><li><strong>æ ¸å¿ƒå·¥å…·</strong>ï¼š<code>segmentGraphemes</code> + <code>measureText</code> + <code>ResizeObserver -&gt; rAF</code> + <code>MutationObserver æŠ‘åˆ¶</code>ã€‚</li><li><strong>å¯è¾¾æ€§çº¦å®š</strong>ï¼š<code>title/aria-label</code> æ°¸è¿œå†™åŸæ–‡ï¼›éœ€è¦æ—¶é¢å¤–è¾“å‡º <code>data-sn-full</code>ã€‚</li></ul><p>éœ€è¦çš„è¯ï¼Œæˆ‘ç»™ä½ æŠŠ<strong>æŒ‡ä»¤æ ¸å¿ƒ</strong>æç‚¼ä¸º <strong><code>&lt;SmartNameText&gt;</code> å‡½æ•°å¼ç»„ä»¶çš„æœ€å°å®ç°ç‰‡æ®µ</strong>ï¼ˆä»…ç»„ä»¶å†…éƒ¨ä»£ç ï¼‰ï¼Œä»¥ä¾¿ä½ ç›´æ¥æ›¿æ¢åˆ°é¡¹ç›®é‡Œã€‚</p><p>ä¸‹é¢ç»™ä½ ä¸€ä¸ª<strong>å¯ç›´æ¥è½åœ°</strong>çš„å‡½æ•°å¼ç»„ä»¶ï¼ˆSFCï¼‰å®Œæ•´ä»£ç ï¼š<code>src/components/SmartNameText.vue</code>ã€‚ æŒ‰ä½ çš„è¦æ±‚ï¼šå¤æ‚é€»è¾‘å¤„æˆ‘åœ¨ä¸Šä¸€è¡ŒåŠ äº†æ³¨é‡Šã€‚</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- ä¸Šä¸€è¡Œæ³¨é‡Šï¼šå¯æ›¿æ¢æ ‡ç­¾åï¼Œé»˜è®¤ spanï¼›displayText ä¸ºå±•ç¤ºç”¨æ–‡æœ¬ï¼Œattrs å†…å« aria/title/dir --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">component</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :is</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tag&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;elRef&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;attrs&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;inlineStyle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    displayText</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  computed,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nextTick,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  onBeforeUnmount,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  onMounted,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ref,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  watch,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** ç»„ä»¶ Propsï¼Œä¸æŒ‡ä»¤ä¿æŒåŒä¸€è¯­ä¹‰é¢ï¼ˆç²¾ç®€åˆ°æœ€å¸¸ç”¨çš„ï¼‰ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;one-line&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;multi-line&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;middle-ellipsis&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;auto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Props</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** åŸå§‹æ˜µç§°æ–‡æœ¬ï¼ˆå•ä¸€æ•°æ®æºï¼‰ */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** å±•ç¤ºæ¨¡å¼ï¼šé»˜è®¤ auto */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** å¤šè¡Œçœç•¥çš„è¡Œæ•° */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** æ˜¯å¦å±•ç¤º tooltipï¼ˆä½¿ç”¨åŸæ–‡ï¼‰ */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  tooltip</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** æ˜¯å¦æ ¹æ®æ–‡æœ¬è‡ªåŠ¨è®¾ç½®æ–¹å‘ */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  dirAuto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** auto æ¨¡å¼ä¼˜å…ˆ CSSï¼Œå¤šè¡Œè£…ä¸ä¸‹å†é€€åŒ–åˆ°ä¸­é—´çœç•¥ */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  preferCSS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** å³ä¾§é¢„ç•™åƒç´ ï¼ˆç»™æŒ‰é’®/å›¾æ ‡ç•™è¾¹ï¼Œé¿å…è¢«å®Œå…¨åƒæ‰ï¼‰ */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  reservePx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** åŒ…è£¹å…ƒç´ æ ‡ç­¾å */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> keyof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElementTagNameMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** é»˜è®¤å€¼ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> withDefaults</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Props</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(), {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;auto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  lines: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tooltip: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  dirAuto: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  preferCSS: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  reservePx: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tag: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;span&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** å®¹å™¨å¼•ç”¨ï¼ˆç”¨äºæµ‹é‡ä¸è§‚å¯Ÿï¼‰ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> elRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HTMLElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** å±•ç¤ºæ–‡æœ¬ï¼ˆä»…åœ¨ middle-ellipsis/auto é€€åŒ–æ—¶ä¼šæ˜¯çœç•¥æ–‡æœ¬ï¼›å…¶ä½™ä¿æŒåŸæ–‡ï¼‰ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> displayText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(props.text);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** æ— éšœç¢ä¸ tooltip å±æ€§ï¼ˆæ°¸è¿œä½¿ç”¨åŸæ–‡ï¼‰ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> attrs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;aria-label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: props.text,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (props.tooltip) a.title </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> props.text;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (props.dirAuto) a.dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;auto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** å†…è”æ ·å¼ï¼ˆä»…ç”¨äºæ–½åŠ å•/å¤šè¡Œçœç•¥ä¸å…œåº• maxWidthï¼‰ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> inlineStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;({});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* --------------------- å·¥å…·å‡½æ•° --------------------- */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** ä¸Šä¸€è¡Œæ³¨é‡Šï¼šå­—ç´ ç°‡åˆ‡åˆ†ï¼Œé¿å…æŠŠ emoji/åˆå­—åˆ‡åŠï¼›æ—  Intl.Segmenter æ—¶é€€åŒ–ä¸º Array.from */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> segmentGraphemes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // @ts-ignore</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> seg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Intl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Segmenter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { granularity: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;grapheme&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">segment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text), (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s.segment);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** ä¸Šä¸€è¡Œæ³¨é‡Šï¼šåŸºäºå…ƒç´ çœŸå®å­—ä½“æ„å»ºæµ‹é‡å‡½æ•°ï¼Œä¿è¯åƒç´ å®½åº¦è¯„ä¼°å‡†ç¡® */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buildMeasure</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;canvas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getComputedStyle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(el);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šå°½é‡å®Œæ•´åœ°æ‹¼æ¥ font å­—ä¸²ï¼Œå‡å°‘ä¸åŒå¹³å°è¯¯å·®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> font</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cs.fontStyle,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cs.fontVariant,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cs.fontWeight,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cs.fontStretch,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cs.fontSize,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cs.lineHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;normal&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lineHeight</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cs.fontFamily,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Boolean)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot; &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ctx.font </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> font;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">measureText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s).width;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** ä¸Šä¸€è¡Œæ³¨é‡Šï¼šæ ¹æ®å¯ç”¨åƒç´ å®½åº¦åšâ€œä¸­é—´çœç•¥â€ï¼Œé¦–å°¾äº¤æ›¿æ‰©å±•ç¡®ä¿å¯è¯»æ€§ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> middleEllipsisByWidth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  el</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  reservePx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> measure</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buildMeasure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(el);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> max</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.clientWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reservePx;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ell</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;â€¦&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">measure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> max) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (max </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> measure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ell)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ell;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> segmentGraphemes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tail </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šå¯å‘å¼äº¤æ›¿æ‰©å±•é¦–å°¾ï¼Œç›´åˆ°è¶…å®½ä¸ºæ­¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tail </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> g.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> candidate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> g.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, head).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ell </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> g.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tail).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> w</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> measure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(candidate);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (w </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> max) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tail) head</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tail) head</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  head </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, head);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tail </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tail);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> g.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, head).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ell </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> g.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tail).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* --------------------- æ ¸å¿ƒæ¸²æŸ“é€»è¾‘ --------------------- */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** ä¸Šä¸€è¡Œæ³¨é‡Šï¼šåº”ç”¨ CSS å•/å¤šè¡Œçœç•¥ï¼ˆä¸æ”¹å†™æ–‡æœ¬ï¼‰ï¼Œå¹¶è®¾ç½®å…œåº•æ ·å¼ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> applyCssMode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> st</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.style;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.maxWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;100%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…œåº•ï¼Œé¿å…çªç ´çˆ¶å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-webkit-line-clamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;display&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-webkit-box-orient&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;white-space&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text-overflow&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;overflow&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;word-break&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;overflow-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;line-break&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;one-line&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šæ ‡å‡†å•è¡Œçœç•¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.display </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;block&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.whiteSpace </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nowrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.overflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hidden&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.textOverflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ellipsis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;multi-line&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šWebKit å¤šè¡Œçœç•¥ + CJK/é•¿ token æ–­è¡Œç­–ç•¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.display </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;-webkit-box&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.overflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hidden&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.whiteSpace </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;normal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (st </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-webkit-box-orient&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vertical&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (st </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-webkit-line-clamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lines);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (st </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;pretty&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.lineBreak </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;auto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.wordBreak </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;break-word&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (st </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;overflow-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;anywhere&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** ä¸Šä¸€è¡Œæ³¨é‡Šï¼šæ ¹æ® props.mode æ¸²æŸ“ï¼›auto æ¨¡å¼å…ˆå°è¯•å¤šè¡Œ CSSï¼Œæº¢å‡ºåˆ™é€€åˆ°ä¸­é—´çœç•¥ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> render</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> el</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> elRef.value;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">el) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (props.mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;one-line&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    applyCssMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(el, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;one-line&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, props.lines);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    displayText.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> props.text; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ–‡æœ¬ä¿æŒåŸæ–‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (props.mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;multi-line&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    applyCssMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(el, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;multi-line&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, props.lines);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    displayText.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> props.text; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ–‡æœ¬ä¿æŒåŸæ–‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (props.mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;middle-ellipsis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šä¸­é—´çœç•¥éœ€è¦ nowrap+ellipsisï¼Œæ–‡æœ¬æ›¿æ¢ä¸ºçœç•¥ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> st</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.style;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;display&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-webkit-line-clamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.whiteSpace </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nowrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.textOverflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ellipsis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.overflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hidden&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    displayText.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> middleEllipsisByWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.text, el, props.reservePx);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šauto æ¨¡å¼ï¼šå…ˆ CSS å¤šè¡Œï¼Œå¦‚ä»æº¢å‡ºåˆ™é€€åˆ°ä¸­é—´çœç•¥å•è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (props.preferCSS) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    applyCssMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(el, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;multi-line&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, props.lines);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    displayText.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> props.text;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šä¸‹ä¸€å¸§è¯»å¸ƒå±€å†åˆ¤æ–­æ˜¯å¦æº¢å‡ºï¼Œé¿å…åŒæ­¥è¯»å¯¼è‡´å›æµ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">el) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> overflowed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        el.scrollHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.clientHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.scrollWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.clientWidth;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">overflowed) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šé€€åŒ–è‡³å•è¡Œä¸­é—´çœç•¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> st</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.style;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;display&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      st.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-webkit-line-clamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      st.whiteSpace </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nowrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      st.textOverflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ellipsis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      st.overflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hidden&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      displayText.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> middleEllipsisByWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        props.text,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        el,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        props.reservePx</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šä¸åå¥½ CSSï¼Œç›´æ¥æŒ‰ä¸­é—´çœç•¥å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> st</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.style;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.whiteSpace </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nowrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.textOverflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ellipsis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    st.overflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hidden&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    displayText.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> middleEllipsisByWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.text, el, props.reservePx);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* --------------------- è§‚å¯Ÿä¸è°ƒåº¦ --------------------- */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** ä¸Šä¸€è¡Œæ³¨é‡Šï¼šç”¨ rAF åˆå¹¶å¤šæ¬¡é‡ç®—ï¼ˆRO é«˜é¢‘å›è°ƒ â†’ æ¯å¸§ä¸€æ¬¡ï¼‰ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rafId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scheduleRender</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rafId) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cancelAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rafId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rafId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rafId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** ä¸Šä¸€è¡Œæ³¨é‡Šï¼šResizeObserver åªåšè°ƒåº¦ï¼Œé¿å…å›è°ƒé£æš´ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ro</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ResizeObserver</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šåˆå§‹åŒ–æ ·å¼å¯¹è±¡ï¼ˆä¾›å¤–éƒ¨ class å åŠ æ—¶ä¹Ÿèƒ½å…œåº•ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inlineStyle.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { maxWidth: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä¸Šä¸€è¡Œæ³¨é‡Šï¼šé¦–å¸§æ¸²æŸ“æ”¾åˆ° nextTickï¼Œç¡®ä¿æ‹¿åˆ°æœ€ç»ˆå°ºå¯¸</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  nextTick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scheduleRender);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (elRef.value) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ro </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ResizeObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scheduleRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">observe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(elRef.value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onBeforeUnmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rafId) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cancelAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rafId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ro?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disconnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ro </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** ä¸Šä¸€è¡Œæ³¨é‡Šï¼štext æˆ–å°ºå¯¸ç›¸å…³ props å˜åŒ–æ—¶é‡ç®— */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [props.text, props.mode, props.lines, props.reservePx, props.preferCSS],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scheduleRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><hr><h2 id="ä¸ºä»€ä¹ˆè¿™ä¸ªç»„ä»¶æ¯”-æŒ‡ä»¤-æ›´å¥½" tabindex="-1">ä¸ºä»€ä¹ˆè¿™ä¸ª<strong>ç»„ä»¶</strong>æ¯”â€œæŒ‡ä»¤â€æ›´å¥½ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¿™ä¸ªç»„ä»¶æ¯”-æŒ‡ä»¤-æ›´å¥½" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆè¿™ä¸ª**ç»„ä»¶**æ¯”â€œæŒ‡ä»¤â€æ›´å¥½&quot;">â€‹</a></h2><ul><li><p><strong>å•ä¸€æ•°æ®æºï¼Œå¤©ç„¶é¿å…â€œtooltip è¢«çœç•¥æ–‡æœ¬æ±¡æŸ“â€</strong> ç»„ä»¶ç”¨ <code>props.text</code> ä½œä¸º<strong>å”¯ä¸€çœŸç›¸æº</strong>ï¼Œå±•ç¤ºå€¼ä¸ <code>title/aria-label</code> éƒ½ä» props è®¡ç®—ï¼›ä¸åƒæŒ‡ä»¤é‚£æ ·è¦åœ¨ DOM é‡Œè¯»/å†™ <code>textContent</code> å†é…åˆ MutationObserver æŠ‘åˆ¶å›è°ƒã€‚</p></li><li><p><strong>è¾¹ç•Œæ¸…æ™°ï¼Œä¾¿äºæµ‹è¯•ä¸ç±»å‹çº¦æŸ</strong> ç»„ä»¶çš„è¾“å…¥/è¾“å‡ºéƒ½åœ¨ Vue çš„å“åº”å¼ä½“ç³»å†…ï¼Œ<strong>ä¸ç”¨æŒ‚åœ¨å®¿ä¸»å…ƒç´ ä¸Š</strong>ç»´æŠ¤éšè—çŠ¶æ€ï¼ˆdataset/ç§æœ‰å­—æ®µï¼‰ã€‚JS æµ‹é‡ä¸è§‚å¯Ÿçš„å‰¯ä½œç”¨åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ï¼Œ<strong>å•å…ƒæµ‹/E2E</strong>éƒ½æ›´å¥½å†™ã€‚</p></li><li><p><strong>æ›´å®¹æ˜“å’Œ UI åº“é›†æˆ</strong> ç›´æ¥æŠŠå®ƒåŒ…åˆ° <code>&lt;a-tooltip&gt;</code>/<code>&lt;el-tooltip&gt;</code> é‡Œå³å¯ï¼›æˆ–è€…è®©å®ƒåªäº§å‡º <code>displayText</code>ï¼Œç”±çˆ¶ç»„ä»¶å†³å®š Tooltip å½¢æ€ã€‚æŒ‡ä»¤å¸¸å¸¸å’Œä¸‰æ–¹ç»„ä»¶çš„ DOM ç»“æ„/æ¸²æŸ“æ—¶æœºæ‰“æ¶ã€‚</p></li><li><p><strong>SSR/Hydration æ›´å¯æ§</strong> ç»„ä»¶åœ¨ <code>onMounted</code> åæ‰åšæµ‹é‡ä¸ ResizeObserverï¼›SSR ç«¯ä»…è¾“å‡ºåŸæ–‡ã€‚æŒ‡ä»¤åœ¨å®¿ä¸»å…ƒç´ ä¸Šæ”¹å†™æ–‡æœ¬ï¼Œå®¹æ˜“ä¸æ¡†æ¶çš„ hydration å¯¹é½é—®é¢˜çº ç¼ ã€‚</p></li><li><p><strong>æ›´æ˜“æ¼”è¿›</strong> åç»­è¦åŠ â€œå¤åˆ¶æŒ‰é’®â€â€œå³é”®èœå•â€â€œå¼‚æ­¥æœ¬åœ°åŒ–â€â€œç»Ÿè®¡åŸ‹ç‚¹â€ï¼Œç»„ä»¶å†…éƒ¨éƒ½èƒ½è‡ªç„¶æ‰¿è½½ï¼›æŒ‡ä»¤åˆ™éœ€è¦æ›´å¤šä¸å®¿ä¸»äº¤äº’çš„çº¦å®šã€‚</p></li></ul><blockquote><p>æŒ‡ä»¤ä»æœ‰å…¶ç”¨æ­¦ä¹‹åœ°ï¼ˆä¾‹å¦‚ï¼š<strong>ä¸æƒ³æ”¹ DOM ç»“æ„</strong>ã€æˆ–<strong>ç»™å†å²é¡µé¢åšä½ä¾µå…¥æ”¹é€ </strong>ï¼‰ï¼Œä½†<strong>æ–°é¡µé¢/æ–°åŠŸèƒ½</strong>ä¼˜å…ˆç”¨ç»„ä»¶ï¼Œä¼šè®©é•¿æœŸç»´æŠ¤æ›´è½»æ¾ã€‚</p></blockquote>`,93)])])}const o=i(h,[["render",t]]);export{g as __pageData,o as default};
