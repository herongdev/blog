import{_ as e,c as i,o as p,ag as t}from"./chunks/framework.oqSrIbQK.js";const u=JSON.parse('{"title":"uniapp 使用 微信登录","description":"","frontmatter":{},"headers":[],"relativePath":"posts/需求实现/登录鉴权/uniapp 微信登录.md","filePath":"posts/需求实现/登录鉴权/uniapp 微信登录.md","lastUpdated":1764331727000}'),n={name:"posts/需求实现/登录鉴权/uniapp 微信登录.md"};function o(l,a,s,_,r,c){return p(),i("div",null,[...a[0]||(a[0]=[t('<h1 id="uniapp-使用-微信登录" tabindex="-1">uniapp 使用 微信登录 <a class="header-anchor" href="#uniapp-使用-微信登录" aria-label="Permalink to &quot;uniapp 使用 微信登录&quot;">​</a></h1><ul><li>微信开放平台注册 app, 通过审核后得到 appId 和 AppSecret;</li><li>在 uniapp 的 manifest.json 中配置好启用微信登录，配置 appId;</li><li>编写代码，使用 uni.login，指定 provide 为 weixin，就可以一微得到 code;</li><li>由于使用了原生登录，所以需要重新打包自定义基座；然后重新运行，测试登录 ；</li><li>将 code 发送给后端，后端使用 code 换取 access_token;</li><li>后端使用 access_token 获取用户信息; 其中有 unionid;通过数据库查找是否有相应的用户，没有则创建用户;如果有则更新用户信息;</li><li>后端使用用户信息生成 token;并返回给前端;</li><li>前端存储后端返回的 token; 并使用后端返回的 token 进行之后的请求;</li></ul>',2)])])}const m=e(n,[["render",o]]);export{u as __pageData,m as default};
